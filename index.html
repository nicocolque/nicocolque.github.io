<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leer y mostrar data.json sin token</title>
    <script>
        const repoOwner = "nicocolque";
        const repoName = "nicocolque.github.io";
        const filePath = "data.json";
        const apiUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filePath}`;

        // Función para obtener el contenido del archivo data.json
        async function getData() {
            try {
                const response = await fetch(apiUrl, {
                    method: "GET",
                    headers: {
                        "Accept": "application/vnd.github.v3.raw", // Solicitar el contenido crudo
                    }
                });

                if (!response.ok) {
                    throw new Error('Error al obtener el archivo');
                }

                const content = await response.text(); // Obtener el contenido del archivo directamente como texto

                if (content.trim() === "") {
                    document.getElementById("data").innerText = "No hay contenido";
                } else {
                    document.getElementById("data").innerText = content;
                }

            } catch (error) {
                console.error('Error:', error);
                document.getElementById("data").innerText = "No se pudo obtener el archivo.";
            }
        }

        // Función que obtiene el archivo cada 1 segundo para actualizaciones rápidas
        function startRealTimeUpdates() {
            setInterval(getData, 1000); // Actualizar cada 1 segundo (1000 ms)
        }

        window.onload = () => {
            startRealTimeUpdates();  // Comienza las actualizaciones al cargar la página
            getData(); // Llamar al método inmediatamente al cargar la página
        };
    </script>
</head>
<body>
    <h1>Contenido del archivo data.json:</h1>
    <pre id="data">Cargando...</pre>
</body>
</html>